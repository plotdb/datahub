var ctrl,form=datahub.as(function(t){return this.id=(t=null==t?{}:t).id||0,this}),ref$=form.prototype;ref$.opsIn=function(t){return json0.type.apply(this._data,t),this.render()},ref$.update=function(t){var i,n;if("closed"!==this.state())return i="form-"+this.id,n=[],this._data&&this._data[i]&&n.push({p:[i],od:this._data[i]}),n.push({p:[i],oi:t}),this._data[i]=t,n=json0.diff(this.data,this._data),this.opsOut(n)},ref$.render=function(){return this.view.render()},ref$.init=function(t){var i=this,t=t.node;if(this.view=new ldview({root:t,action:{input:{input:function(t){t=t.node;return i.update(t.value),i.render()}}},handler:{output:function(t){return t.node.value=JSON.stringify(i._data||{}," ",2)}}}),this.on("open",function(){return this._data=JSON.parse(JSON.stringify(this.data)),this.render()}),"opened"===this.state())return this._data=JSON.parse(JSON.stringify(this.data)),this.render()},(ctrl={init:function(){var i=this;return this.src=new datahub.mem,this.src.opsOut([{p:"hi",oi:"hello"}]),this.forms=[0,1,2].map(function(t){return new form({id:t,scope:["test"]})}),this.forms.forEach(function(t){return i.src.pipe(t.hub)}),this.view=new ldView({root:document.body,handler:{form:{list:function(){return i.forms},init:function(t){var i=t.node;return t.data.init({node:i})}}}})}}).init();